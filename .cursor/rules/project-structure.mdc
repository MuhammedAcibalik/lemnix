---
alwaysApply: true
description: Proje yapısı, klasör organizasyonu ve mimari kurallar
---

# Proje Yapısı ve Organizasyon

## Backend Yapısı

```
backend/
├── src/
│   ├── config/           # Konfigürasyon dosyaları
│   ├── controllers/      # Route handler'lar
│   ├── services/         # İş mantığı
│   ├── repositories/     # Data access layer
│   ├── models/           # Domain modelleri
│   ├── middleware/       # Express middleware'ler
│   ├── routes/           # Route tanımları
│   ├── types/            # TypeScript type'lar
│   ├── utils/            # Utility fonksiyonlar
│   └── index.ts          # Entry point
├── prisma/               # Database schema
├── tests/                # Test dosyaları
└── package.json
```

### Backend Kuralları

1. **Controllers** - Sadece HTTP layer
   - Request/Response handling
   - Input validation
   - Service çağrıları
   - ❌ İş mantığı YAZMA

2. **Services** - İş mantığı
   - Business rules
   - Orchestration
   - ❌ HTTP detayları YAZMA

3. **Repositories** - Data access
   - Database operations
   - ❌ İş mantığı YAZMA

4. **Middleware** - Cross-cutting concerns
   - Authentication
   - Authorization
   - Logging
   - Rate limiting
   - Error handling

## Frontend Yapısı (FSD)

```
frontend/
└── src/
    ├── app/              # App initialization
    │   ├── providers/    # Context providers
    │   ├── router/       # Route configuration
    │   └── styles/       # Global styles
    ├── pages/            # Page components
    │   └── HomePage/
    │       ├── ui/       # Page UI components
    │       ├── model/    # Page state
    │       └── index.ts
    ├── widgets/          # Complex UI blocks
    │   └── Header/
    │       ├── ui/
    │       ├── model/
    │       └── index.ts
    ├── features/         # User actions
    │   └── auth/
    │       ├── ui/
    │       ├── model/
    │       ├── api/
    │       └── index.ts
    ├── entities/         # Domain entities
    │   └── user/
    │       ├── ui/
    │       ├── model/
    │       ├── api/
    │       └── index.ts
    └── shared/           # Shared utilities
        ├── ui/           # UI primitives
        ├── lib/          # Utils
        ├── api/          # API client
        └── config/       # Constants
```

### Frontend Kuralları (FSD)

1. **app** → Sadece initialization
2. **pages** → Route components
3. **widgets** → Birden fazla feature içerebilir
4. **features** → Tek kullanıcı aksiyonu
5. **entities** → Domain business logic
6. **shared** → Teknik utilities

**Bağımlılık Yönü:**
```
app → pages → widgets → features → entities → shared
```

## Dosya İsimlendirme

### Backend
```typescript
// PascalCase - Classes
UserController.ts
PaymentService.ts
UserRepository.ts

// camelCase - Functions/utilities
validateEmail.ts
formatDate.ts
apiClient.ts

// kebab-case - Routes
user-routes.ts
payment-routes.ts
```

### Frontend
```typescript
// PascalCase - Components
Button.tsx
UserCard.tsx
LoginForm.tsx

// camelCase - Hooks
useAuth.ts
useDebounce.ts
useFetch.ts

// camelCase - Utils
formatCurrency.ts
validateForm.ts
```

## Import Organizasyonu

```typescript
// 1. Node/External packages
import { Router } from 'express';
import React from 'react';

// 2. Internal packages
import { logger } from '@/services/logger';

// 3. Types
import type { User, UserRole } from '@/types';

// 4. Relative imports
import { validateUser } from './validators';
import { UserService } from './UserService';
```

## Public API Pattern

### Her modül public API expose eder

```typescript
// features/auth/index.ts
export { LoginForm } from './ui/LoginForm';
export { useAuth } from './model/useAuth';
export { authApi } from './api/authApi';

// İç detaylar EXPORT EDİLMEZ
// ❌ export { validatePassword } from './lib/validators';
```

### Kullanım
```typescript
// ✅ İyi - Public API
import { LoginForm, useAuth } from '@/features/auth';

// ❌ Kötü - İç detaylara erişim
import { validatePassword } from '@/features/auth/lib/validators';
```

## Shared Klasörü

### Sadece teknik utilities
```
shared/
├── ui/               # Primitif UI components
│   ├── Button/
│   ├── Input/
│   └── Modal/
├── lib/              # Utility functions
│   ├── formatters/
│   ├── validators/
│   └── helpers/
├── api/              # API client
│   └── client.ts
├── config/           # Constants
│   └── constants.ts
└── types/            # Common types
    └── common.ts
```

### ❌ Shared'a KONMAMASI gerekenler
- Business logic
- Domain models
- Feature-specific kod
- Widget-specific kod

## Test Organizasyonu

```
tests/
├── unit/             # Unit tests
│   ├── services/
│   ├── utils/
│   └── models/
├── integration/      # Integration tests
│   ├── api/
│   └── database/
└── e2e/              # End-to-end tests
    └── scenarios/
```

### Test dosya isimleri
```
UserService.ts       → UserService.test.ts
formatDate.ts        → formatDate.test.ts
Button.tsx           → Button.test.tsx
```

## Config Dosyaları

```
project/
├── .cursor/          # Cursor rules
│   └── rules/
├── .vscode/          # VS Code settings
├── .github/          # GitHub workflows
├── .eslintrc.js      # ESLint config
├── .prettierrc       # Prettier config
├── tsconfig.json     # TypeScript config
└── .env.example      # Environment template
```

## Önemli Notlar

1. **Circular Dependencies** - Asla olmamalı!
2. **Deep Imports** - 3 seviyeden fazla olmamalı
3. **God Classes** - 300+ satır class refactor et
4. **Magic Numbers** - Constant olarak tanımla
5. **Hardcoded Values** - Config'e taşı
