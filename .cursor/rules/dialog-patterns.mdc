---
description: Dialog tasarım pattern'leri - wizard, progressive disclosure, modern UX
globs: frontend/src/**/*Dialog*.tsx,frontend/src/**/dialogs/*.tsx
---

# Dialog Tasarım Pattern'leri

## Genel Prensipler

### Progressive Disclosure
Kullanıcıya aşamalı olarak bilgi göster. Tüm bilgiyi tek seferde yükleme.

### Visual Hierarchy
- Header → Content → Actions (yukarıdan aşağıya önem sırası)
- Primary action sağda, secondary action solda
- Close butonu her zaman sağ üstte

### Glassmorphism Header
Modern, hafif, şık header tasarımı için glassmorphism kullan.

---

## Dialog Yapısı Template

```typescript
import { useDesignSystem } from '@/shared/hooks';
import {
  Dialog,
  DialogContent,
  DialogActions,
  Box,
  Typography,
  IconButton,
  Button,
  alpha,
} from '@mui/material';
import { Close as CloseIcon } from '@mui/icons-material';

interface MyDialogProps {
  open: boolean;
  onClose: () => void;
  onSave: () => void;
  isLoading?: boolean;
}

export const MyDialog: React.FC<MyDialogProps> = ({
  open,
  onClose,
  onSave,
  isLoading = false,
}) => {
  const ds = useDesignSystem();

  return (
    <Dialog
      open={open}
      onClose={onClose}
      maxWidth="md"
      fullWidth
      PaperProps={{
        sx: {
          borderRadius: `${ds.borderRadius.xl}px`,
          overflow: 'hidden',
          maxHeight: '90vh',
        }
      }}
    >
      {/* GLASS HEADER */}
      <Box sx={{
        background: ds.glass.background,
        backdropFilter: ds.glass.backdropFilter,
        borderBottom: ds.glass.border,
        p: ds.spacing['4'],
        display: 'flex',
        alignItems: 'center',
        justifyContent: 'space-between',
      }}>
        {/* Gradient Title */}
        <Typography sx={{
          fontSize: '1.5rem',
          fontWeight: 700,
          background: ds.gradients.primary,
          backgroundClip: 'text',
          WebkitBackgroundClip: 'text',
          WebkitTextFillColor: 'transparent',
          letterSpacing: ds.typography.letterSpacing.tight,
        }}>
          Dialog Başlığı
        </Typography>
        
        <IconButton onClick={onClose} size="small">
          <CloseIcon fontSize="small" />
        </IconButton>
      </Box>

      {/* CONTENT */}
      <DialogContent sx={{ p: ds.spacing['4'] }}>
        {/* Your content here */}
      </DialogContent>

      {/* FOOTER ACTIONS */}
      <DialogActions sx={{
        p: ds.spacing['4'],
        borderTop: `1px solid ${ds.colors.neutral[200]}`,
        gap: ds.spacing['2'],
      }}>
        <Button
          variant="outlined"
          onClick={onClose}
          disabled={isLoading}
        >
          İptal
        </Button>
        <Button
          variant="contained"
          onClick={onSave}
          disabled={isLoading}
        >
          Kaydet
        </Button>
      </DialogActions>
    </Dialog>
  );
};
```

---

## Pattern 1: Step-by-Step Wizard

### Ne Zaman Kullan
- Çok aşamalı form (3+ adım)
- Her adım farklı bilgi kategorisi
- Validation her adımda ayrı

### Implementasyon

```typescript
import { useState, useMemo } from 'react';
import { Stepper, Step, StepLabel } from '@mui/material';

const STEPS = ['Temel Bilgiler', 'Profil Detayları', 'Özet'];

export const WizardDialog: React.FC<Props> = ({ open, onClose, onSave }) => {
  const ds = useDesignSystem();
  const [activeStep, setActiveStep] = useState(0);
  const [formData, setFormData] = useState({...});

  // Step validation
  const isStepValid = useMemo(() => {
    switch (activeStep) {
      case 0:
        return formData.workOrderId && formData.size;
      case 1:
        return formData.profiles.length > 0 && 
               formData.profiles.every(p => p.profile && p.measurement);
      case 2:
        return true; // Summary step
      default:
        return false;
    }
  }, [activeStep, formData]);

  const handleNext = () => {
    if (activeStep === STEPS.length - 1) {
      onSave();
    } else {
      setActiveStep(prev => prev + 1);
    }
  };

  const handleBack = () => {
    setActiveStep(prev => prev - 1);
  };

  return (
    <Dialog open={open} onClose={onClose} maxWidth="md" fullWidth>
      {/* Glass Header */}
      <Box sx={{
        background: ds.glass.background,
        backdropFilter: ds.glass.backdropFilter,
        p: ds.spacing['4'],
      }}>
        <Typography sx={{
          fontSize: '1.5rem',
          fontWeight: 700,
          background: ds.gradients.primary,
          backgroundClip: 'text',
          WebkitBackgroundClip: 'text',
          WebkitTextFillColor: 'transparent',
          mb: ds.spacing['3'],
        }}>
          Yeni İş Emri
        </Typography>

        {/* Stepper */}
        <Stepper activeStep={activeStep}>
          {STEPS.map((label) => (
            <Step key={label}>
              <StepLabel>{label}</StepLabel>
            </Step>
          ))}
        </Stepper>
      </Box>

      {/* Step Content */}
      <DialogContent sx={{ p: ds.spacing['4'] }}>
        {activeStep === 0 && <Step1Content />}
        {activeStep === 1 && <Step2Content />}
        {activeStep === 2 && <Step3Summary />}
      </DialogContent>

      {/* Navigation Footer */}
      <DialogActions sx={{ 
        p: ds.spacing['4'], 
        justifyContent: 'space-between',
        borderTop: `1px solid ${ds.colors.neutral[200]}`,
      }}>
        <Button
          onClick={onClose}
          variant="outlined"
          color="inherit"
        >
          İptal
        </Button>
        
        <Box sx={{ display: 'flex', gap: ds.spacing['2'] }}>
          <Button
            disabled={activeStep === 0}
            onClick={handleBack}
            startIcon={<ArrowBackIcon />}
          >
            Geri
          </Button>
          <Button
            variant="contained"
            onClick={handleNext}
            disabled={!isStepValid}
            endIcon={activeStep === STEPS.length - 1 ? 
              <CheckCircleIcon /> : <ArrowForwardIcon />}
          >
            {activeStep === STEPS.length - 1 ? 'Kaydet' : 'İleri'}
          </Button>
        </Box>
      </DialogActions>
    </Dialog>
  );
};
```

### ✅ Wizard Pattern Benefits
- Cognitive load düşük (her adımda 1 konu)
- Progress tracking (kullanıcı nerede olduğunu bilir)
- Validation aşamalı (her adım kendi içinde validate)
- Back navigation (kullanıcı geri dönebilir)

---

## Pattern 2: Simple Form Dialog

### Ne Zaman Kullan
- Tek aşamalı form
- 1-5 field
- Hızlı işlem

### Implementasyon

```typescript
export const SimpleDialog: React.FC<Props> = ({ open, onClose, onSave }) => {
  const ds = useDesignSystem();
  const [productName, setProductName] = useState('');
  const [description, setDescription] = useState('');

  const isValid = productName.trim().length > 0;

  const handleSave = () => {
    if (isValid) {
      onSave(productName, description);
      onClose();
    }
  };

  return (
    <Dialog open={open} onClose={onClose} maxWidth="sm" fullWidth>
      {/* Glass Header */}
      <Box sx={{
        background: ds.glass.background,
        backdropFilter: ds.glass.backdropFilter,
        borderBottom: ds.glass.border,
        p: ds.spacing['4'],
      }}>
        <Typography sx={{
          fontSize: '1.25rem',
          fontWeight: 700,
          background: ds.gradients.primary,
          backgroundClip: 'text',
          WebkitBackgroundClip: 'text',
          WebkitTextFillColor: 'transparent',
        }}>
          Yeni Ürün Grubu
        </Typography>
      </Box>

      {/* Content - Compact Spacing */}
      <DialogContent sx={{ p: ds.spacing['4'] }}>
        <Stack spacing={ds.spacing['3']}>
          <TextField
            label="Ürün Adı"
            value={productName}
            onChange={(e) => setProductName(e.target.value)}
            fullWidth
            required
            autoFocus
          />
          <TextField
            label="Açıklama (Opsiyonel)"
            value={description}
            onChange={(e) => setDescription(e.target.value)}
            fullWidth
            multiline
            rows={2}
          />
        </Stack>
      </DialogContent>

      {/* Footer */}
      <DialogActions sx={{ p: ds.spacing['4'], gap: ds.spacing['2'] }}>
        <Button variant="outlined" onClick={onClose}>
          İptal
        </Button>
        <Button 
          variant="contained" 
          onClick={handleSave}
          disabled={!isValid}
        >
          Ekle
        </Button>
      </DialogActions>
    </Dialog>
  );
};
```

---

## Pattern 3: Selection Dialog (List)

### Ne Zaman Kullan
- Kullanıcı listeden seçim yapacak
- Multiple options
- Preview gerekli

### Implementasyon

```typescript
export const SelectionDialog: React.FC<Props> = ({
  open,
  onClose,
  combinations,
  onSelect,
  isLoading,
}) => {
  const ds = useDesignSystem();

  return (
    <Dialog open={open} onClose={onClose} maxWidth="md" fullWidth>
      {/* Glass Header with Gradient */}
      <Box sx={{
        background: ds.glass.background,
        backdropFilter: ds.glass.backdropFilter,
        borderBottom: ds.glass.border,
        p: ds.spacing['4'],
      }}>
        <Box sx={{ display: 'flex', alignItems: 'center', gap: ds.spacing['2'] }}>
          <SpeedIcon sx={{ 
            color: ds.colors.success.main,
            fontSize: ds.componentSizes.icon.lg 
          }} />
          <Typography sx={{
            fontSize: '1.5rem',
            fontWeight: 700,
            background: ds.gradients.success,
            backgroundClip: 'text',
            WebkitBackgroundClip: 'text',
            WebkitTextFillColor: 'transparent',
          }}>
            Akıllı Profil Kombinasyonları
          </Typography>
        </Box>
        <Typography sx={{
          color: ds.colors.text.secondary,
          fontSize: '0.875rem',
          mt: ds.spacing['1'],
        }}>
          Daha önce kullandığınız profil kombinasyonları
        </Typography>
      </Box>

      {/* Content - Scrollable List */}
      <DialogContent sx={{ p: ds.spacing['4'] }}>
        {isLoading ? (
          <LoadingState />
        ) : combinations.length === 0 ? (
          <EmptyState />
        ) : (
          <Stack spacing={ds.spacing['2']}>
            {combinations.map((combo, index) => (
              <Card
                key={combo.id}
                onClick={() => onSelect(combo)}
                sx={{
                  cursor: 'pointer',
                  transition: ds.transitions.base,
                  border: `1px solid ${ds.colors.neutral[200]}`,
                  '&:hover': {
                    borderColor: ds.colors.success.main,
                    boxShadow: ds.shadows.soft.md,
                    transform: 'translateY(-2px)',
                  }
                }}
              >
                <CardContent>
                  {/* Combination details */}
                </CardContent>
              </Card>
            ))}
          </Stack>
        )}
      </DialogContent>

      {/* Footer */}
      <DialogActions sx={{ p: ds.spacing['4'] }}>
        <Button variant="outlined" onClick={onClose}>
          Kapat
        </Button>
      </DialogActions>
    </Dialog>
  );
};
```

---

## Loading States

### Button Loading
```typescript
<Button
  variant="contained"
  onClick={handleSave}
  disabled={isLoading}
  startIcon={isLoading ? <CircularProgress size={16} /> : <CheckIcon />}
>
  {isLoading ? 'Kaydediliyor...' : 'Kaydet'}
</Button>
```

### Content Loading
```typescript
{isLoading ? (
  <Box sx={{ 
    display: 'flex', 
    justifyContent: 'center', 
    alignItems: 'center',
    minHeight: 200,
  }}>
    <CircularProgress />
  </Box>
) : (
  <ContentHere />
)}
```

---

## Empty States

### Actionable Empty State
```typescript
<Box sx={{ 
  textAlign: 'center', 
  py: ds.spacing['8'],
  px: ds.spacing['4'],
}}>
  <AssessmentIcon sx={{ 
    fontSize: 48, 
    color: ds.colors.neutral[400],
    mb: ds.spacing['2'],
  }} />
  <Typography sx={{
    fontSize: '1.125rem',
    fontWeight: 600,
    color: ds.colors.text.primary,
    mb: ds.spacing['1'],
  }}>
    Henüz kombinasyon yok
  </Typography>
  <Typography sx={{
    fontSize: '0.875rem',
    color: ds.colors.text.secondary,
    mb: ds.spacing['4'],
  }}>
    İlk profil kombinasyonunuzu oluşturmak için iş emri ekleyin
  </Typography>
  <Button variant="contained" startIcon={<AddIcon />}>
    İş Emri Ekle
  </Button>
</Box>
```

---

## Error States

### Inline Error Display
```typescript
{error && (
  <Alert 
    severity="error" 
    sx={{ 
      mb: ds.spacing['3'],
      borderRadius: `${ds.borderRadius.md}px`,
    }}
    onClose={() => setError(null)}
  >
    {error}
  </Alert>
)}
```

### Field-Level Error
```typescript
<TextField
  label="İş Emri No"
  value={workOrderId}
  onChange={(e) => setWorkOrderId(e.target.value)}
  error={!!fieldError}
  helperText={fieldError}
  fullWidth
/>
```

---

## Dialog Size Guidelines

### Küçük Dialog (sm) - 600px
- Simple forms (1-3 fields)
- Confirmations
- Quick actions

### Orta Dialog (md) - 900px
- Standard forms (4-8 fields)
- Wizard dialogs
- List selections

### Büyük Dialog (lg) - 1200px
- Complex forms (8+ fields)
- Multi-column layouts
- Data tables

```typescript
<Dialog 
  maxWidth="md"  // sm | md | lg | xl
  fullWidth
>
```

---

## Responsive Dialog

```typescript
<Dialog
  maxWidth="md"
  fullWidth
  fullScreen={isMobile}  // Mobile'da fullscreen
  PaperProps={{
    sx: {
      borderRadius: {
        xs: 0,  // Mobile: no radius
        sm: `${ds.borderRadius.xl}px`,  // Desktop: rounded
      },
      maxHeight: {
        xs: '100vh',
        sm: '90vh',
      }
    }
  }}
>
```

---

## Visual Distinction (Edit vs New)

### New Dialog - Primary Gradient
```typescript
<Typography sx={{
  background: ds.gradients.primary,  // Blue → Purple
  backgroundClip: 'text',
  WebkitBackgroundClip: 'text',
  WebkitTextFillColor: 'transparent',
}}>
  Yeni İş Emri
</Typography>
```

### Edit Dialog - Accent Gradient
```typescript
<Typography sx={{
  background: ds.gradients.success,  // Green
  backgroundClip: 'text',
  WebkitBackgroundClip: 'text',
  WebkitTextFillColor: 'transparent',
}}>
  İş Emrini Düzenle
</Typography>
```

---

## Accessibility

### Keyboard Navigation
```typescript
<Dialog
  open={open}
  onClose={onClose}
  aria-labelledby="dialog-title"
  aria-describedby="dialog-description"
>
  <Typography id="dialog-title">Title</Typography>
  <Typography id="dialog-description">Description</Typography>
</Dialog>
```

### Focus Management
```typescript
<TextField
  autoFocus  // İlk field auto-focus
  onKeyDown={(e) => {
    if (e.key === 'Enter' && isValid) {
      handleSave();
    }
  }}
/>
```

---

## Anti-Pattern'ler (Yapma!)

### ❌ Dialog İçinde Dialog
```typescript
// YANLIŞ - Dialog içinde başka dialog açma
<Dialog open={open1}>
  <Dialog open={open2}>  // NO!
  </Dialog>
</Dialog>

// DOĞRU - Tek dialog, farklı content
<Dialog open={open}>
  {view === 'main' && <MainView />}
  {view === 'details' && <DetailsView />}
</Dialog>
```

### ❌ Çok Uzun Dialog
```typescript
// YANLIŞ - 50+ field tek dialog'da
// DOĞRU - Wizard'a böl veya Tab kullan
```

### ❌ Footer'da Tek Buton
```typescript
// YANLIŞ - Sadece "Kaydet" var, cancel yok
<DialogActions>
  <Button>Kaydet</Button>  // Kullanıcı nasıl çıkacak?
</DialogActions>

// DOĞRU - Her zaman cancel option ver
<DialogActions>
  <Button onClick={onClose}>İptal</Button>
  <Button onClick={onSave}>Kaydet</Button>
</DialogActions>
```

---

## Checklist

- [ ] Glass header kullanıldı mı?
- [ ] Gradient title uygulandı mı?
- [ ] Close button sağ üstte mi?
- [ ] Loading state var mı?
- [ ] Empty state var mı?
- [ ] Error state var mı?
- [ ] Validation açık mı?
- [ ] Cancel butonu var mı?
- [ ] Keyboard navigation destekli mi?
- [ ] Responsive tasarım uygulandı mı?

---

## Referanslar

- [NewItemDialog - Wizard Örneği](mdc:frontend/src/components/CuttingListBuilder/dialogs/NewItemDialog.tsx)
- [CombinationDialog - Selection Örneği](mdc:frontend/src/components/CuttingListBuilder/dialogs/CombinationDialog.tsx)
- [EditItemDialog - Edit Pattern](mdc:frontend/src/components/CuttingListBuilder/dialogs/EditItemDialog.tsx)
- [NewProductDialog - Simple Form](mdc:frontend/src/components/CuttingListBuilder/dialogs/NewProductDialog.tsx)
